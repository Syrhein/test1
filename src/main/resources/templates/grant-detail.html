<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì§€ì›ê¸ˆ ìƒì„¸ ì •ë³´</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>ì§€ì›ê¸ˆ ìƒì„¸ ì •ë³´</h1>
    <div>
        <p><strong>ì§€ì›ê¸ˆëª…:</strong> <span id="grantName"></span></p>
        <p><strong>ì§€ì› ëŒ€ìƒ:</strong> <span id="grantTarget"></span></p>
        <p><strong>ì‹ ì²­ ê¸°ê°„:</strong> <span id="grantPeriod"></span></p>
        <p><strong>ë‚´ìš©:</strong> <span id="grantContent"></span></p>
    </div>

<script>
    $(document).ready(function() {
        let seq = "[[${seq}]]";  // Thymeleafì—ì„œ ì „ë‹¬ëœ seq ê°’
        console.log("ğŸ“Œ ìƒì„¸ í˜ì´ì§€ seq ê°’:", seq);

        $.ajax({
            url: "https://apis.data.go.kr/1390000/youngV2/policyViewV2?typeDv=json&serviceKey=lwFN%2B9DgtdnDkUuQpxCaemhEBXNKBw%2FEIeII2WsOlInuroAHa9InabfXhyR365jieyuEEzrb2QYAHP3b3AlrFA%3D%3D&seq=" + seq,
            type: "GET",
            dataType: "json",
            success: function(response) {
                console.log("ğŸ“Œ ìƒì„¸ API ì‘ë‹µ ë°ì´í„°:", response);

                // âœ… ì˜¬ë°”ë¥¸ ë°ì´í„° ê²½ë¡œë¡œ ìˆ˜ì •
                let grant = response.policy_result;  // policy_result ë‚´ë¶€ì— ë°ì´í„°ê°€ ìˆìŒ

                // âœ… ê° ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ í›„ ì—…ë°ì´íŠ¸
                $("#grantName").text(grant.title || "ì œëª© ì—†ìŒ");
                $("#grantTarget").text(grant.eduTarget || "ëŒ€ìƒ ì •ë³´ ì—†ìŒ");
                $("#grantPeriod").text((grant.applStDt || "ê¸°ê°„ ì—†ìŒ") + " ~ " + (grant.applEdDt || "ê¸°ê°„ ì—†ìŒ"));
                $("#grantContent").text(grant.contents || "ë‚´ìš© ì—†ìŒ");
            },
            error: function() {
                alert("ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            }
        });
    });
</script>


    <a href="/grants">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
</body>
</html>
